# Avito-backend-trainee-assignment-autumn-2025

# Запуск проекта
## 1) Склонируйте репозиторий
```
git clone https://github.com/lohpesch09/Avito-backend-trainee-assignment-autumn-2025
```
## 2) Перейдите в корневую дирректорию
```
cd avito-backend-trainee-assignment-autumn-2025
```
## 3) Запустите проект при помощи команды
```
docker-compose up --build
```
## 4) Сервер доступен по адресу
```
http://localhost:8080
```
# Допущения и ограничения
## Допущения
* В спецификации не было ничего сказано про эндпоинт, который должен создавать пользователей, поэтому их создание происходит при обращении к эндпоинту ```/team/add``` и вызове метода ```TeamCreate``` сервиса Team. При вызове это метода также происходит проверка на существование каждого из пользователей из переданного в теле запроса списка. В случае наличия пользователя возвращается ошибка ```UserExistsAnotherTeam```, которая не была описана в спецификации, но я решил её добавить. Мне показалось логичным то, что сотрудник в рамках одной компании не может состоять в нескольких командах одновременно. 
* Структура таблиц БД была спроектирована отличным от моделей приложения образом. Я спроектировал её так, чтобы у сущностей не было избыточной зависимости друг от друга, а была зависимость только через FOREIGN KEYS. Так же было разрешено отношение "многие ко многим" между таблицами ```pull_requests``` и ```users``` при помощи таблицы ```pr_reviewers```. 
* При обращении к эндпоинту ```/users/setIsActive``` и замене флага активности на false, пользователь перестаёт быть ревьюером в тех ПР, в которых им являлся. Раз пользователь с ```is_active = false``` не может быть ревьюером ПР, логично также удалять его из списка ревьюеров при замене у него флага активности на ```false```
* Во многих методах сервисов было принято решение добавить выполнение методов репозиториев в отдельных транзакциях для соблюдение консистентности данных.
## Ограничения
* В методе ```TeamCreate``` проверка существования пользовотелей в БД осуществляется за счёт итерации по списку пользователей и вызова метода ```FindUserById``` репозитория User для каждого пользователя. В избежании многократного обращения к БД, можно создать метод, который будет принимать список пользователей и проверять наличие пользователей по всем ```user_id``` из списка. Также в начальном варианте при использовании итерации можно добавить обработку каждого запроса в отдельной горутине в целях оптимизации обращения к БД. Данные идеи не были реализованы в связи с недостатком времени.
* Приложение не содержит unit-тестов также из-за нехватки времени на их написание и сделанного упора на разработку всей требуемой бизнес-логики.
